@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@using Microsoft.AspNetCore.Hosting
@inject IWebHostEnvironment _hostingEnvironment

@{
   
    // Lấy link trực ảnh từ file tỉnh
    string folderPath = System.IO.Path.Combine(_hostingEnvironment.WebRootPath, "ContractImage"); // + thêm ID của contract

    string folderItem = System.IO.Path.Combine(folderPath, "1");

    string[] imageFiles = Directory.GetFiles(folderItem);
}
<!-- ssss-->
<script src="https://code.jquery.com/jquery-3.4.0.min.js" integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg=" crossorigin="anonymous"></script>

<!-- SuperSignature : Script (required) -->
<script language="javascript" type="text/javascript" src="~/Scripts/ss.js"></script>
<!-- [[[ ***********  IMPORTANT: DONOT USE THIS SS.JS ON PRODUCTION;
     USE THE ONE AVAILABLE TO DOWNLOAD FROM YOUR DASHBOARD (POST PURCHASE) ************* ]]] -->
<!-- BOOTSTRAP 4 -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


<div class="container-fluid">
    <button class="create_regions">
        <i class="ph-bold ph-arrow-left"></i>
    </button>
    <div class="fit_email">
        <h5>Mã biên bản lắp</h5>
    </div>
    <h4 style="color: #4318FF;">Xác nhận ký khách hàng</h4>
    <div class="row justify-content-around text-center form_SignedCus">
        <div class="col-4" style="min-width:500px;">
            <h5 style="color: #4318FF; text-align:start; margin-top:40px;">Vùng ký cho khách hàng</h5>
            <div class="signing-Zone">
                @await Component.InvokeAsync("SignControl")
            </div>
            <div class="row justify-content-around" style="padding:35px 0;">
                <div class="form-inline">
                    <input type="button" id="btnUndo" class="btn btn-primary" onclick="UndoSignature('ctlSignature');" value="Trở lại" />&nbsp;
                    <input type="button" id="btnClear" class="btn btn-danger" onclick="ClearSignature('ctlSignature');" value="Xóa" />&nbsp;
                    @* <input type="button" id="btnSave" class="btn btn-success" onclick="ValidateSign();" value="Save" />&nbsp; *@
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-12" style="display:contents;">
                    <button class="access" id="btnSave" onclick="ValidateSign();">
                        XÁC NHẬN KÝ
                    </button>
                </div>
            </div>
        </div>
        <div class="col-8" style="min-width: 800px;">
            <div id="myCarousel" class="carousel slide" style="width: 100%; height:100%;">
                @*   <div class="carousel-indicators">
                @foreach (var item in imageFiles)
                {
                <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                }
                </div> *@
                <div class="carousel-inner">
                    <div class="carousel-item active " style="width:800px;">
                        <img src="~/Resource/Image/LOGO/1.png" alt="Hình ảnh" style="margin:100px auto;" />
                    </div>
                    @foreach (var imgPath in imageFiles)
                    {
                        <div class="carousel-item" style="max-height: 800px;overflow-y: scroll;">
                            <img src="@Url.Content("~/ContractImage/1/" + System.IO.Path.GetFileName(imgPath))" alt="Hình ảnh" style="width:100%;" />
                        </div>
                    }
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev" style="margin: auto;background-color: black;font-size: 100px;width: 50px;height: 100px;">
                    <span class="carousel-control-prev-icon" aria-hidden="true" style="width:20px; height:20px;"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button style="margin: auto;background-color: black;font-size: 100px; width: 50px;height: 100px;" class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true" style="width:20px; height:20px;"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    </div>

</div>
<script type="text/javascript">

    var statV = false;

    function StatusBar() {
        SignatureStatusBar('ctlSignature', statV);
        statV = !statV; // toggle

        // change status bar look dynamically
        $('#ctlSignature_status').css({ "color": "orangered", "font-size": "12px", "font-weight": "bold", "float": "left" });
    }

    function ValidateSign() {
        var isValid = ValidateSignature('ctlSignature');

        if (!isValid) {
            $('#ctlSignature').css("border", "2px dashed red");
        }
        else {
            $('#ctlSignature').css("border", "2px dashed green");
        }

        if (isValid === true) {
            SaveSign();
        }
    }

    function SaveSign() {

        var btnSave = $("#btnSave");

        btnSave.prop('disabled', true);

        var ctlSignature = { Data: $("#ctlSignature_data").val(), Smooth: $("#ctlSignature_data_smooth").val() };

        $.ajax({
            url: "/Customer/SaveSignature/",
            data: JSON.stringify(ctlSignature),
            contentType: "application/json",
            type: 'POST',
            cache: false,
            success: function (data) {
                $("#imgSign").attr("src", "/Signs/" + data);
            },
            error: function (textStatus, errorThrown) {
                alert("Unable to save signatures : " + JSON.stringify(textStatus) + " : " + errorThrown);
            }
        });

        btnSave.prop('disabled', false);

    }

    function objctlSignature_status(success, points) {
        $("#liStatus").html("<strong>Signature done? : " + success + ", with " + points + " points.</strong>");
    }

    $(document).ready(function () { StatusBar(); });

    $(document).ready(function () {
        $('#myCarousel').carousel({
            interval: false
        });
    });
</script>